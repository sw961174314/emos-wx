{"version":3,"sources":["uni-app:///main.js","webpack:///D:/SpringCloud/emos-wx/pages/role/role.vue?8902","webpack:///D:/SpringCloud/emos-wx/pages/role/role.vue?096c","webpack:///D:/SpringCloud/emos-wx/pages/role/role.vue?3fda","webpack:///D:/SpringCloud/emos-wx/pages/role/role.vue?69ab","uni-app:///pages/role/role.vue","webpack:///D:/SpringCloud/emos-wx/components/uni-popup/uni-popup.vue?73a4","webpack:///D:/SpringCloud/emos-wx/components/uni-popup/uni-popup.vue?a2f4","webpack:///D:/SpringCloud/emos-wx/components/uni-popup/uni-popup.vue?c1c7","webpack:///D:/SpringCloud/emos-wx/components/uni-popup/uni-popup.vue?1ca6","uni-app:///components/uni-popup/uni-popup.vue","webpack:///D:/SpringCloud/emos-wx/components/uni-popup/uni-popup.vue?ff55","webpack:///D:/SpringCloud/emos-wx/components/uni-popup/uni-popup.vue?87ff","webpack:///D:/SpringCloud/emos-wx/pages/role/role.vue?897e","webpack:///D:/SpringCloud/emos-wx/pages/role/role.vue?ea24"],"names":["createPage","Page"],"mappings":"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","file":"pages/role/role.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/role/role.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./role.vue?vue&type=template&id=7ff2aec6&\"\nvar renderjs\nimport script from \"./role.vue?vue&type=script&lang=js&\"\nexport * from \"./role.vue?vue&type=script&lang=js&\"\nimport style0 from \"./role.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/role/role.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./role.vue?vue&type=template&id=7ff2aec6&\"","var components = {\n  uniList: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-list/uni-list\" */ \"@/components/uni-list/uni-list.vue\"\n    )\n  },\n  uniListItem: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-list-item/uni-list-item\" */ \"@/components/uni-list-item/uni-list-item.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.checkPermission([\"ROOT\", \"ROLE:SELECT\"])\n  var m1 = m0\n    ? _vm.checkPermission([\"ROOT\", \"ROLE:INSERT\", \"ROLE:UPDATE\"])\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./role.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"page\" v-if=\"checkPermission(['ROOT', 'ROLE:SELECT'])\">\r\n\t\t<view v-for=\"one in list\" :key=\"one.moduleName\">\r\n\t\t\t<view class=\"list-title\">{{ one.moduleName }}</view>\r\n\t\t\t<uni-list v-if=\"one.action.length > 0\">\r\n\t\t\t\t<uni-list-item\r\n\t\t\t\t\tv-for=\"action in one.action\"\r\n\t\t\t\t\t:title=\"action.actionName\"\r\n\t\t\t\t\t:key=\"action\"\r\n\t\t\t\t\t:show-switch=\"true\"\r\n\t\t\t\t\t:switchChecked=\"action.selected\"\r\n\t\t\t\t\t@switchChange=\"switchChange\"\r\n\t\t\t\t\t:dataId=\"action.id\"\r\n\t\t\t\t></uni-list-item>\r\n\t\t\t</uni-list>\r\n\t\t</view>\r\n\t\t<button class=\"btn\" @tap=\"save\" v-if=\"checkPermission(['ROOT', 'ROLE:INSERT', 'ROLE:UPDATE'])\">保存</button>\r\n\t</view>\n</template>\n\n<script>\r\n\timport uniList from '@/components/uni-list/uni-list.vue'\r\n\timport uniListItem from '@/components/uni-list-item/uni-list-item.vue'\r\n\timport uniPopup from '@/components/uni-popup/uni-popup.vue'\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tuniList,\r\n\t\t\tuniListItem\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\t// URL传参 insert代表新增 edit代表修改\n\t\t\t\topt: null,\r\n\t\t\t\t// URL传参 如果opt是edit 需要根据角色名字查找该角色的权限\r\n\t\t\t\troleName: null,\r\n\t\t\t\tlist: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tmoduleName: '用户管理',\r\n\t\t\t\t\t\taction: [\r\n\t\t\t\t\t\t\t{ actionName: '添加',selected:1 },\r\n\t\t\t\t\t\t\t{ actionName: '修改',selected:1 },\r\n\t\t\t\t\t\t\t{ actionName: '查询',selected:1 },\r\n\t\t\t\t\t\t\t{ actionName: '删除',selected:1 },\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\tmoduleName: '部门管理',\r\n\t\t\t\t\t\taction: [\r\n\t\t\t\t\t\t\t{ actionName: '添加',selected:1 },\r\n\t\t\t\t\t\t\t{ actionName: '修改',selected:1 },\r\n\t\t\t\t\t\t\t{ actionName: '查询',selected:1 },\r\n\t\t\t\t\t\t\t{ actionName: '删除',selected:1 },\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tid: 0,\r\n\t\t\t\tselected: {}\n\t\t\t};\n\t\t},\r\n\t\tonShow:function(){\r\n\t\t\tlet that = this;\r\n\t\t\tlet url;\r\n\t\t\tlet method;\r\n\t\t\tif(that.opt == 'insert'){\r\n\t\t\t\turl = that.url.searchAllPermission;\r\n\t\t\t\tmethod = 'GET';\r\n\t\t\t}else{\r\n\t\t\t\turl = that.url.searchRoleOwnPermission;\r\n\t\t\t\tmethod = 'POST';\r\n\t\t\t}\r\n\t\t\tthat.ajax(url,method,{\"id\":that.id},function(resp){\r\n\t\t\t\tthat.list = resp.data.result;\r\n\t\t\t\tfor(let one of that.list){\r\n\t\t\t\t\tfor(let action of one.action){\r\n\t\t\t\t\t\t// 把角色具有的权限保存到selected里面\r\n\t\t\t\t\t\tif(action.selected == true){\r\n\t\t\t\t\t\t\tthat.selected[action.id] = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tonLoad:function(options){\r\n\t\t\tthis.opt = options.opt;\r\n\t\t\t// hasOwnProperty查找一个对象是否有这个属性\r\n\t\t\tif(options.hasOwnProperty('roleName')){\r\n\t\t\t\tthis.roleName = options.roleName;\r\n\t\t\t}\r\n\t\t\tif(options.hasOwnProperty('id')){\r\n\t\t\t\tthis.id = options.id;\r\n\t\t\t}\r\n\t\t},\n\t\tmethods: {\n\t\t\tswitchChange: function(e){\r\n\t\t\t\tlet id = e.target.dataset.id;\r\n\t\t\t\tif(e.detail.value){\r\n\t\t\t\t\tthis.selected[id] = true\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdelete this.selected[id]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsave: function(){\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet url;\r\n\t\t\t\tif(that.opt == 'insert'){\r\n\t\t\t\t\turl = that.url.insertRole\r\n\t\t\t\t}else{\r\n\t\t\t\t\turl = that.url.updateRolePermissions\r\n\t\t\t\t}\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tid: that.id,\r\n\t\t\t\t\troleName: that.roleName,\r\n\t\t\t\t\tpermissions: \"[\" + Object.keys(that.selected) + \"]\"\r\n\t\t\t\t};\r\n\t\t\t\tthat.ajax(url,'POST',data,function(resp){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\ttitle: '保存成功',\r\n\t\t\t\t\t\tcomplete:function(){\r\n\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},2000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"less\">\n\t@import url(\"role.less\");\n</style>\n","import { render, staticRenderFns, recyclableRender, components } from \"./uni-popup.vue?vue&type=template&id=7da806a4&scoped=true&\"\nvar renderjs\nimport script from \"./uni-popup.vue?vue&type=script&lang=js&\"\nexport * from \"./uni-popup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./uni-popup.vue?vue&type=style&index=0&id=7da806a4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7da806a4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/uni-popup/uni-popup.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-popup.vue?vue&type=template&id=7da806a4&scoped=true&\"","var components = {\n  uniTransition: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-transition/uni-transition\" */ \"@/components/uni-transition/uni-transition.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-popup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-popup.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view v-if=\"showPopup\" class=\"uni-popup\" :class=\"[popupstyle]\" @touchmove.stop.prevent=\"clear\">\r\n\t\t<uni-transition v-if=\"maskShow\" :mode-class=\"['fade']\" :styles=\"maskClass\" :duration=\"duration\" :show=\"showTrans\"\r\n\t\t @click=\"onTap\" />\r\n\t\t<uni-transition :mode-class=\"ani\" :styles=\"transClass\" :duration=\"duration\" :show=\"showTrans\" @click=\"onTap\">\r\n\t\t\t<view class=\"uni-popup__wrapper-box\" @click.stop=\"clear\">\r\n\t\t\t\t<slot />\r\n\t\t\t</view>\r\n\t\t</uni-transition>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport uniTransition from '../uni-transition/uni-transition.vue'\r\n\timport popup from './popup.js'\r\n\t/**\r\n\t * PopUp 弹出层\r\n\t * @description 弹出层组件，为了解决遮罩弹层的问题\r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?id=329\r\n\t * @property {String} type = [top|center|bottom] 弹出方式\r\n\t * \t@value top 顶部弹出\r\n\t * \t@value center 中间弹出\r\n\t * \t@value bottom 底部弹出\r\n\t * \t@value message 消息提示\r\n\t * \t@value dialog 对话框\r\n\t * \t@value share 底部分享示例\r\n\t * @property {Boolean} animation = [ture|false] 是否开启动画\r\n\t * @property {Boolean} maskClick = [ture|false] 蒙版点击是否关闭弹窗\r\n\t * @event {Function} change 打开关闭弹窗触发，e={show: false}\r\n\t */\r\n\r\n\texport default {\r\n\t\tname: 'UniPopup',\r\n\t\tcomponents: {\r\n\t\t\tuniTransition\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\t// 开启动画\r\n\t\t\tanimation: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 弹出层类型，可选值，top: 顶部弹出层；bottom：底部弹出层；center：全屏弹出层\r\n\t\t\t// message: 消息提示 ; dialog : 对话框\r\n\t\t\ttype: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'center'\r\n\t\t\t},\r\n\t\t\t// maskClick\r\n\t\t\tmaskClick: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tprovide() {\r\n\t\t\treturn {\r\n\t\t\t\tpopup: this\r\n\t\t\t}\r\n\t\t},\r\n\t\tmixins: [popup],\r\n\t\twatch: {\r\n\t\t\t/**\r\n\t\t\t * 监听type类型\r\n\t\t\t */\r\n\t\t\ttype: {\r\n\t\t\t\thandler: function(newVal) {\r\n\t\t\t\t\tthis[this.config[newVal]]()\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 监听遮罩是否可点击\r\n\t\t\t * @param {Object} val\r\n\t\t\t */\r\n\t\t\tmaskClick(val) {\r\n\t\t\t\tthis.mkclick = val\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tduration: 300,\r\n\t\t\t\tani: [],\r\n\t\t\t\tshowPopup: false,\r\n\t\t\t\tshowTrans: false,\r\n\t\t\t\tmaskClass: {\r\n\t\t\t\t\t'position': 'fixed',\r\n\t\t\t\t\t'bottom': 0,\r\n\t\t\t\t\t'top': 0,\r\n\t\t\t\t\t'left': 0,\r\n\t\t\t\t\t'right': 0,\r\n\t\t\t\t\t'backgroundColor': 'rgba(0, 0, 0, 0.4)'\r\n\t\t\t\t},\r\n\t\t\t\ttransClass: {\r\n\t\t\t\t\t'position': 'fixed',\r\n\t\t\t\t\t'left': 0,\r\n\t\t\t\t\t'right': 0,\r\n\t\t\t\t},\r\n\t\t\t\tmaskShow: true,\r\n\t\t\t\tmkclick: true,\r\n\t\t\t\tpopupstyle: 'top'\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.mkclick = this.maskClick\r\n\t\t\tif (this.animation) {\r\n\t\t\t\tthis.duration = 300\r\n\t\t\t} else {\r\n\t\t\t\tthis.duration = 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tclear(e) {\r\n\t\t\t\t// TODO nvue 取消冒泡\r\n\t\t\t\te.stopPropagation()\r\n\t\t\t},\r\n\t\t\topen() {\r\n\t\t\t\tthis.showPopup = true\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tnew Promise(resolve => {\r\n\t\t\t\t\t\tclearTimeout(this.timer)\r\n\t\t\t\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\t\t\tthis.showTrans = true\r\n\t\t\t\t\t\t\t// fixed by mehaotian 兼容 app 端\r\n\t\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 50);\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t// 自定义打开事件\r\n\t\t\t\t\t\tclearTimeout(this.msgtimer)\r\n\t\t\t\t\t\tthis.msgtimer = setTimeout(() => {\r\n\t\t\t\t\t\t\tthis.customOpen && this.customOpen()\r\n\t\t\t\t\t\t}, 100)\r\n\t\t\t\t\t\tthis.$emit('change', {\r\n\t\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t\t\ttype: this.type\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclose(type) {\r\n\t\t\t\tthis.showTrans = false\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.$emit('change', {\r\n\t\t\t\t\t\tshow: false,\r\n\t\t\t\t\t\ttype: this.type\r\n\t\t\t\t\t})\r\n\t\t\t\t\tclearTimeout(this.timer)\r\n\t\t\t\t\t// 自定义关闭事件\r\n\t\t\t\t\tthis.customOpen && this.customClose()\r\n\t\t\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\t\tthis.showPopup = false\r\n\t\t\t\t\t}, 300)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonTap() {\r\n\t\t\t\tif (!this.mkclick) return\r\n\t\t\t\tthis.close()\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 顶部弹出样式处理\r\n\t\t\t */\r\n\t\t\ttop() {\r\n\t\t\t\tthis.popupstyle = 'top'\r\n\t\t\t\tthis.ani = ['slide-top']\r\n\t\t\t\tthis.transClass = {\r\n\t\t\t\t\t'position': 'fixed',\r\n\t\t\t\t\t'left': 0,\r\n\t\t\t\t\t'right': 0,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 底部弹出样式处理\r\n\t\t\t */\r\n\t\t\tbottom() {\r\n\t\t\t\tthis.popupstyle = 'bottom'\r\n\t\t\t\tthis.ani = ['slide-bottom']\r\n\t\t\t\tthis.transClass = {\r\n\t\t\t\t\t'position': 'fixed',\r\n\t\t\t\t\t'left': 0,\r\n\t\t\t\t\t'right': 0,\r\n\t\t\t\t\t'bottom': 0\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 中间弹出样式处理\r\n\t\t\t */\r\n\t\t\tcenter() {\r\n\t\t\t\tthis.popupstyle = 'center'\r\n\t\t\t\tthis.ani = ['zoom-out', 'fade']\r\n\t\t\t\tthis.transClass = {\r\n\t\t\t\t\t'position': 'fixed',\r\n\t\t\t\t\t/* #ifndef APP-NVUE */\r\n\t\t\t\t\t'display': 'flex',\r\n\t\t\t\t\t'flexDirection': 'column',\r\n\t\t\t\t\t/* #endif */\r\n\t\t\t\t\t'bottom': 0,\r\n\t\t\t\t\t'left': 0,\r\n\t\t\t\t\t'right': 0,\r\n\t\t\t\t\t'top': 0,\r\n\t\t\t\t\t'justifyContent': 'center',\r\n\t\t\t\t\t'alignItems': 'center'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\t.uni-popup {\r\n\t\tposition: fixed;\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tz-index: 99;\r\n\t\t/* #endif */\r\n\t}\r\n\r\n\t.uni-popup__mask {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbackground-color: $uni-bg-color-mask;\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t.mask-ani {\r\n\t\ttransition-property: opacity;\r\n\t\ttransition-duration: 0.2s;\r\n\t}\r\n\r\n\t.uni-top-mask {\r\n\t\topacity: 1;\r\n\t}\r\n\r\n\t.uni-bottom-mask {\r\n\t\topacity: 1;\r\n\t}\r\n\r\n\t.uni-center-mask {\r\n\t\topacity: 1;\r\n\t}\r\n\r\n\t.uni-popup__wrapper {\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: block;\r\n\t\t/* #endif */\r\n\t\tposition: absolute;\r\n\t}\r\n\r\n\t.top {\r\n\t\t/* #ifdef H5 */\r\n\t\ttop: var(--window-top);\r\n\t\t/* #endif */\r\n\t\t/* #ifndef H5 */\r\n\t\ttop: 0;\r\n\t\t/* #endif */\r\n\t}\r\n\r\n\t.bottom {\r\n\t\tbottom: 0;\r\n\t}\r\n\r\n\t.uni-popup__wrapper-box {\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: block;\r\n\t\t/* #endif */\r\n\t\tposition: relative;\r\n\t\t/* iphonex 等安全区设置，底部安全区适配 */\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tpadding-bottom: constant(safe-area-inset-bottom);\r\n\t\tpadding-bottom: env(safe-area-inset-bottom);\r\n\t\t/* #endif */\r\n\r\n\t}\r\n\r\n\t.content-ani {\r\n\t\t// transition: transform 0.3s;\r\n\t\ttransition-property: transform, opacity;\r\n\t\ttransition-duration: 0.2s;\r\n\t}\r\n\r\n\r\n\t.uni-top-content {\r\n\t\ttransform: translateY(0);\r\n\t}\r\n\r\n\t.uni-bottom-content {\r\n\t\ttransform: translateY(0);\r\n\t}\r\n\r\n\t.uni-center-content {\r\n\t\ttransform: scale(1);\r\n\t\topacity: 1;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-popup.vue?vue&type=style&index=0&id=7da806a4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-popup.vue?vue&type=style&index=0&id=7da806a4&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1662425577370\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./role.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./role.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1662425576595\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}